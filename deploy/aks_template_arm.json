{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "resourceName": {
      "type": "String",
      "metadata": {
        "description": "The name of the Managed Cluster resource."
      }
    },
    "location": {
      "type": "String",
      "metadata": {
        "description": "The location of AKS resource."
      }
    },
    "dnsPrefix": {
      "type": "String",
      "metadata": {
        "description": "Optional DNS prefix to use with hosted Kubernetes API server FQDN."
      }
    },
    "osDiskSizeGB": {
      "defaultValue": 0,
      "minValue": 0,
      "maxValue": 1023,
      "type": "Int",
      "metadata": {
        "description": "Disk size (in GiB) to provision for each of the agent pool nodes. This value ranges from 0 to 1023. Specifying 0 will apply the default disk size for that agentVMSize."
      }
    },
    "kubernetesVersion": {
      "defaultValue": "1.7.7",
      "type": "String",
      "metadata": {
        "description": "The version of Kubernetes."
      }
    },
    "networkPlugin": {
      "allowedValues": [
        "azure",
        "kubenet"
      ],
      "type": "String",
      "metadata": {
        "description": "Network plugin used for building Kubernetes network."
      }
    },
    "enableRBAC": {
      "defaultValue": true,
      "type": "Bool",
      "metadata": {
        "description": "Boolean flag to turn on and off of RBAC."
      }
    },
    "vmssNodePool": {
      "defaultValue": false,
      "type": "Bool",
      "metadata": {
        "description": "Boolean flag to turn on and off of virtual machine scale sets"
      }
    },
    "windowsProfile": {
      "defaultValue": false,
      "type": "Bool",
      "metadata": {
        "description": "Boolean flag to turn on and off of virtual machine scale sets"
      }
    },
    "nodeResourceGroup": {
      "type": "String",
      "metadata": {
        "description": "The name of the resource group containing agent pool nodes."
      }
    },
    "upgradeChannel": {
      "allowedValues": [
        "none",
        "patch",
        "rapid",
        "stable",
        "node-image"
      ],
      "type": "String",
      "metadata": {
        "description": "Auto upgrade channel for a managed cluster."
      }
    },
    "adminGroupObjectIDs": {
      "defaultValue": [],
      "type": "Array",
      "metadata": {
        "description": "An array of AAD group object ids to give administrative access."
      }
    },
    "azureRbac": {
      "defaultValue": false,
      "type": "Bool",
      "metadata": {
        "description": "Enable or disable Azure RBAC."
      }
    },
    "disableLocalAccounts": {
      "defaultValue": false,
      "type": "Bool",
      "metadata": {
        "description": "Enable or disable local accounts."
      }
    },
    "enablePrivateCluster": {
      "defaultValue": false,
      "type": "Bool",
      "metadata": {
        "description": "Enable private network access to the Kubernetes cluster."
      }
    },
    "enableAzurePolicy": {
      "defaultValue": false,
      "type": "Bool",
      "metadata": {
        "description": "Boolean flag to turn on and off Azure Policy addon."
      }
    },
    "enableSecretStoreCSIDriver": {
      "defaultValue": false,
      "type": "Bool",
      "metadata": {
        "description": "Boolean flag to turn on and off secret store CSI driver."
      }
    },
    "enableOmsAgent": {
      "defaultValue": true,
      "type": "Bool",
      "metadata": {
        "description": "Boolean flag to turn on and off omsagent addon."
      }
    },
    "workspaceRegion": {
      "defaultValue": "East US",
      "type": "String",
      "metadata": {
        "description": "Specify the region for your OMS workspace."
      }
    },
    "workspaceName": {
      "type": "String",
      "metadata": {
        "description": "Specify the name of the OMS workspace."
      }
    },
    "omsWorkspaceId": {
      "type": "String",
      "metadata": {
        "description": "Specify the resource id of the OMS workspace."
      }
    },
    "omsSku": {
      "defaultValue": "standalone",
      "allowedValues": [
        "free",
        "standalone",
        "pernode"
      ],
      "type": "String",
      "metadata": {
        "description": "Select the SKU for your workspace."
      }
    },
    "acrName": {
      "type": "String",
      "metadata": {
        "description": "Specify the name of the Azure Container Registry."
      }
    },
    "acrResourceGroup": {
      "type": "String",
      "metadata": {
        "description": "The name of the resource group the container registry is associated with."
      }
    },
    "guidValue": {
      "defaultValue": "[newGuid()]",
      "type": "String",
      "metadata": {
        "description": "The unique id used in the role assignment of the kubernetes service to the container registry service. It is recommended to use the default value."
      }
    },
    "vnetSubnetID": {
      "type": "String",
      "metadata": {
        "description": "Resource ID of virtual network subnet used for nodes and/or pods IP assignment."
      }
    },
    "serviceCidr": {
      "type": "String",
      "metadata": {
        "description": "A CIDR notation IP range from which to assign service cluster IPs."
      }
    },
    "dnsServiceIP": {
      "type": "String",
      "metadata": {
        "description": "Containers DNS server IP address."
      }
    },
    "aciVnetSubnetName": {
      "type": "String",
      "metadata": {
        "description": "Name of virtual network subnet used for the ACI Connector."
      }
    },
    "aciConnectorLinuxEnabled": {
      "type": "Bool",
      "metadata": {
        "description": "Enables the Linux ACI Connector."
      }
    }
  },
  "resources": [
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2017-05-10",
      "name": "SolutionDeployment-20230404093220",
      "dependsOn": [
        "[concat('Microsoft.Resources/deployments/', 'WorkspaceDeployment-20230404093220')]"
      ],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
              "apiVersion": "2015-11-01-preview",
              "type": "Microsoft.OperationsManagement/solutions",
              "location": "[parameters('workspaceRegion')]",
              "name": "[concat('ContainerInsights', '(', split(parameters('omsWorkspaceId'),'/')[8], ')')]",
              "properties": {
                "workspaceResourceId": "[parameters('omsWorkspaceId')]"
              },
              "plan": {
                "name": "[concat('ContainerInsights', '(', split(parameters('omsWorkspaceId'),'/')[8], ')')]",
                "product": "[concat('OMSGallery/', 'ContainerInsights')]",
                "promotionCode": "",
                "publisher": "Microsoft"
              }
            }
          ]
        }
      },
      "subscriptionId": "[split(parameters('omsWorkspaceId'),'/')[2]]",
      "resourceGroup": "[split(parameters('omsWorkspaceId'),'/')[4]]"
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2017-05-10",
      "name": "WorkspaceDeployment-20230404093220",
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
              "apiVersion": "2015-11-01-preview",
              "type": "Microsoft.OperationalInsights/workspaces",
              "location": "[parameters('workspaceRegion')]",
              "name": "[parameters('workspaceName')]",
              "properties": {
                "sku": {
                  "name": "[parameters('omsSku')]"
                }
              }
            }
          ]
        }
      },
      "subscriptionId": "[split(parameters('omsWorkspaceId'),'/')[2]]",
      "resourceGroup": "[split(parameters('omsWorkspaceId'),'/')[4]]"
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2019-05-01",
      "name": "ConnectAKStoACR-4fd264f8-825c-4bef-9adb-175d5c951201",
      "dependsOn": [
        "[concat('Microsoft.ContainerService/managedClusters/', parameters('resourceName'))]",
        "[concat('Microsoft.Resources/deployments/', 'AcrDeployment-4fd264f8-825c-4bef-9adb-175d5c951202')]"
      ],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "resources": [
            {
              "apiVersion": "2018-09-01-preview",
              "type": "Microsoft.ContainerRegistry/registries/providers/roleAssignments",
              "name": "[concat(parameters('acrName'), '/Microsoft.Authorization/', parameters('guidValue'))]",
              "properties": {
                "principalId": "[reference(parameters('resourceName'), '2022-06-01').identityProfile.kubeletidentity.objectId]",
                "principalType": "ServicePrincipal",
                "roleDefinitionId": "[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/', '7f951dda-4ed3-4680-a7ca-43fe172d538d')]",
                "scope": "[resourceId(parameters('acrResourceGroup'),'Microsoft.ContainerRegistry/registries/', parameters('acrName'))]"
              }
            }
          ]
        }
      },
      "resourceGroup": "[parameters('acrResourceGroup')]"
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2019-05-01",
      "name": "AcrDeployment-4fd264f8-825c-4bef-9adb-175d5c951202",
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "resources": [
            {
              "type": "Microsoft.ContainerRegistry/registries",
              "apiVersion": "2019-05-01",
              "name": "XXXCR",
              "location": "westeurope",
              "sku": {
                "name": "Standard"
              },
              "properties": {
                "adminUserEnabled": false
              },
              "tags": {}
            }
          ]
        }
      },
      "subscriptionId": "adb313b4-04a7-4fc6-8f6c-4a4de283073b",
      "resourceGroup": "AKS-XXX"
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2017-05-10",
      "name": "InsightsActionGroupDepl-4fd264f8-825c-4bef-9adb-175d5c951205",
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "resources": [
            {
              "type": "microsoft.insights/actionGroups",
              "apiVersion": "2022-06-01",
              "name": "RecommendedAlertRules-AG-1",
              "location": "Global",
              "properties": {
                "groupShortName": "recalert1",
                "enabled": true,
                "emailReceivers": [
                  {
                    "name": "Email_-EmailAction-",
                    "emailAddress": "XXX@microsoft.com",
                    "useCommonAlertSchema": true
                  }
                ],
                "emailSMSAppReceivers": []
              }
            }
          ]
        }
      }
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2017-05-10",
      "name": "InsightsMetricAlertsDepl-4fd264f8-825c-4bef-9adb-175d5c951206",
      "dependsOn": [
        "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourcegroups/AKS-XXX/providers/Microsoft.ContainerService/managedClusters/XXX-POC-AKS",
        "[concat('Microsoft.Resources/deployments/', 'InsightsActionGroupDepl-4fd264f8-825c-4bef-9adb-175d5c951205')]"
      ],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "resources": [
            {
              "type": "microsoft.insights/metricAlerts",
              "apiVersion": "2018-03-01",
              "name": "CPU Usage Percentage - XXX-POC-AKS",
              "location": "Global",
              "properties": {
                "severity": 3,
                "enabled": true,
                "scopes": [
                  "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourcegroups/AKS-XXX/providers/Microsoft.ContainerService/managedClusters/XXX-POC-AKS"
                ],
                "evaluationFrequency": "PT5M",
                "windowSize": "PT5M",
                "criteria": {
                  "allOf": [
                    {
                      "name": "Metric1",
                      "metricName": "node_cpu_usage_percentage",
                      "metricNamespace": "Microsoft.ContainerService/managedClusters",
                      "operator": "GreaterThan",
                      "timeAggregation": "Average",
                      "criterionType": "StaticThresholdCriterion",
                      "threshold": 80
                    }
                  ],
                  "odata.type": "Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria"
                },
                "targetResourceType": "Microsoft.ContainerService/managedClusters",
                "actions": [
                  {
                    "actionGroupId": "[resourceId('Microsoft.Insights/ActionGroups', 'RecommendedAlertRules-AG-1')]",
                    "webhookProperties": {}
                  }
                ]
              }
            },
            {
              "type": "microsoft.insights/metricAlerts",
              "apiVersion": "2018-03-01",
              "name": "Memory Working Set Percentage - XXX-POC-AKS",
              "location": "Global",
              "properties": {
                "severity": 3,
                "enabled": true,
                "scopes": [
                  "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourcegroups/AKS-XXX/providers/Microsoft.ContainerService/managedClusters/XXX-POC-AKS"
                ],
                "evaluationFrequency": "PT5M",
                "windowSize": "PT5M",
                "criteria": {
                  "allOf": [
                    {
                      "name": "Metric1",
                      "metricName": "node_memory_working_set_percentage",
                      "metricNamespace": "Microsoft.ContainerService/managedClusters",
                      "operator": "GreaterThan",
                      "timeAggregation": "Average",
                      "criterionType": "StaticThresholdCriterion",
                      "threshold": 80
                    }
                  ],
                  "odata.type": "Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria"
                },
                "targetResourceType": "Microsoft.ContainerService/managedClusters",
                "actions": [
                  {
                    "actionGroupId": "[resourceId('Microsoft.Insights/ActionGroups', 'RecommendedAlertRules-AG-1')]",
                    "webhookProperties": {}
                  }
                ]
              }
            }
          ]
        }
      }
    },
    {
      "type": "Microsoft.ContainerService/managedClusters",
      "apiVersion": "2022-06-01",
      "name": "[parameters('resourceName')]",
      "location": "[parameters('location')]",
      "dependsOn": [
        "[concat('Microsoft.Resources/deployments/', 'WorkspaceDeployment-20230404093220')]",
        "VnetDeployment-4fd264f8-825c-4bef-9adb-175d5c951207"
      ],
      "tags": {},
      "sku": {
        "name": "Basic",
        "tier": "Paid"
      },
      "identity": {
        "type": "SystemAssigned"
      },
      "properties": {
        "kubernetesVersion": "[parameters('kubernetesVersion')]",
        "enableRBAC": "[parameters('enableRBAC')]",
        "dnsPrefix": "[parameters('dnsPrefix')]",
        "nodeResourceGroup": "[parameters('nodeResourceGroup')]",
        "azureMonitorProfile": {
          "metrics": {
            "enabled": true,
            "kubeStateMetrics": {
              "metricLabelsAllowlist": "",
              "metricAnnotationsAllowList": ""
            }
          }
        },
        "agentPoolProfiles": [
          {
            "name": "agentpool",
            "osDiskSizeGB": "[parameters('osDiskSizeGB')]",
            "count": 3,
            "enableAutoScaling": true,
            "minCount": 3,
            "maxCount": 5,
            "vmSize": "Standard_D4lds_v5",
            "osType": "Linux",
            "storageProfile": "ManagedDisks",
            "type": "VirtualMachineScaleSets",
            "mode": "System",
            "maxPods": 110,
            "availabilityZones": [
              "1",
              "2",
              "3"
            ],
            "nodeTaints": [],
            "enableNodePublicIP": false,
            "tags": {},
            "vnetSubnetID": "[parameters('vnetSubnetID')]"
          }
        ],
        "networkProfile": {
          "loadBalancerSku": "standard",
          "networkPlugin": "[parameters('networkPlugin')]",
          "serviceCidr": "[parameters('serviceCidr')]",
          "dnsServiceIP": "[parameters('dnsServiceIP')]"
        },
        "autoUpgradeProfile": {
          "upgradeChannel": "[parameters('upgradeChannel')]"
        },
        "disableLocalAccounts": "[parameters('disableLocalAccounts')]",
        "apiServerAccessProfile": {
          "enablePrivateCluster": "[parameters('enablePrivateCluster')]"
        },
        "addonProfiles": {
          "azurepolicy": {
            "enabled": "[parameters('enableAzurePolicy')]"
          },
          "azureKeyvaultSecretsProvider": {
            "enabled": "[parameters('enableSecretStoreCSIDriver')]",
            "config": null
          },
          "omsAgent": {
            "enabled": "[parameters('enableOmsAgent')]",
            "config": {
              "logAnalyticsWorkspaceResourceID": "[parameters('omsWorkspaceId')]"
            }
          },
          "aciConnectorLinux": {
            "enabled": "[parameters('aciConnectorLinuxEnabled')]",
            "config": {
              "SubnetName": "[parameters('aciVnetSubnetName')]"
            }
          }
        }
      }
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2019-05-01",
      "name": "ClusterMonitoringMetricPulisherRoleAssignmentDepl-20230404093221",
      "dependsOn": [
        "[concat('Microsoft.ContainerService/managedClusters/', parameters('resourceName'))]",
        "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourceGroups/AKS-XXX/providers/Microsoft.ContainerService/managedClusters/XXX-POC-AKS"
      ],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
              "type": "Microsoft.ContainerService/managedClusters/providers/roleAssignments",
              "apiVersion": "2018-09-01-preview",
              "name": "XXX-POC-AKS/Microsoft.Authorization/ebf2a1aa-51d2-44df-85cb-349f604668b6",
              "properties": {
                "roleDefinitionId": "[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/', '3913510d-42f4-4e42-8a64-420c390055eb')]",
                "principalId": "[reference(parameters('resourceName')).addonProfiles.omsAgent.identity.objectId]",
                "principalType": "ServicePrincipal",
                "scope": "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourceGroups/AKS-XXX/providers/Microsoft.ContainerService/managedClusters/XXX-POC-AKS"
              }
            }
          ]
        }
      },
      "subscriptionId": "adb313b4-04a7-4fc6-8f6c-4a4de283073b",
      "resourceGroup": "AKS-XXX"
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2019-05-01",
      "name": "VnetDeployment-4fd264f8-825c-4bef-9adb-175d5c951207",
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "resources": [
            {
              "apiVersion": "2021-01-01",
              "name": "AKS-XXX-vnet",
              "type": "Microsoft.Network/virtualNetworks",
              "location": "westeurope",
              "properties": {
                "subnets": [
                  {
                    "name": "default",
                    "id": "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourceGroups/AKS-XXX/providers/Microsoft.Network/virtualNetworks/AKS-XXX-vnet/subnets/default",
                    "properties": {
                      "addressPrefix": "10.224.0.0/16"
                    }
                  },
                  {
                    "name": "virtual-node-aci",
                    "id": "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourceGroups/AKS-XXX/providers/Microsoft.Network/virtualNetworks/AKS-XXX-vnet/subnets/virtual-node-aci",
                    "properties": {
                      "addressPrefix": "10.239.0.0/16",
                      "delegations": [
                        {
                          "name": "aciDelegation",
                          "properties": {
                            "serviceName": "Microsoft.ContainerInstance/containerGroups",
                            "actions": [
                              "Microsoft.Network/virtualNetworks/subnets/action"
                            ]
                          }
                        }
                      ]
                    }
                  }
                ],
                "addressSpace": {
                  "addressPrefixes": [
                    "10.224.0.0/12"
                  ]
                }
              },
              "tags": {}
            }
          ]
        }
      }
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2019-05-01",
      "name": "ClusterSubnetRoleAssignmentDeployment-20230404093221",
      "dependsOn": [
        "[concat('Microsoft.ContainerService/managedClusters/', parameters('resourceName'))]",
        "VnetDeployment-4fd264f8-825c-4bef-9adb-175d5c951207"
      ],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
              "type": "Microsoft.Network/virtualNetworks/subnets/providers/roleAssignments",
              "apiVersion": "2018-09-01-preview",
              "name": "AKS-XXX-vnet/default/Microsoft.Authorization/1cfcf239-fefc-4f86-9310-9ab07edc683b",
              "properties": {
                "roleDefinitionId": "[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/', '4d97b98b-1d4f-4787-a291-c67834d212e7')]",
                "principalId": "[reference(parameters('resourceName'),'2022-06-01','Full').identity.principalId]",
                "principalType": "ServicePrincipal",
                "scope": "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourceGroups/AKS-XXX/providers/Microsoft.Network/virtualNetworks/AKS-XXX-vnet/subnets/default"
              }
            }
          ]
        }
      },
      "subscriptionId": "adb313b4-04a7-4fc6-8f6c-4a4de283073b",
      "resourceGroup": "AKS-XXX"
    },
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2019-05-01",
      "name": "AciSubnetRoleAssignmentDeployment-20230404093221",
      "dependsOn": [
        "[concat('Microsoft.ContainerService/managedClusters/', parameters('resourceName'))]",
        "VnetDeployment-4fd264f8-825c-4bef-9adb-175d5c951207"
      ],
      "properties": {
        "mode": "Incremental",
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "parameters": {},
          "variables": {},
          "resources": [
            {
              "type": "Microsoft.Network/virtualNetworks/subnets/providers/roleAssignments",
              "apiVersion": "2018-09-01-preview",
              "name": "AKS-XXX-vnet/virtual-node-aci/Microsoft.Authorization/c78b196d-54b1-4dcf-a15e-bfd7d09737a0",
              "properties": {
                "roleDefinitionId": "[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/', '4d97b98b-1d4f-4787-a291-c67834d212e7')]",
                "principalId": "[reference(parameters('resourceName')).addonProfiles.aciConnectorLinux.identity.objectId]",
                "principalType": "ServicePrincipal",
                "scope": "/subscriptions/adb313b4-04a7-4fc6-8f6c-4a4de283073b/resourceGroups/AKS-XXX/providers/Microsoft.Network/virtualNetworks/AKS-XXX-vnet/subnets/virtual-node-aci"
              }
            }
          ]
        }
      },
      "subscriptionId": "adb313b4-04a7-4fc6-8f6c-4a4de283073b",
      "resourceGroup": "AKS-XXX"
    }
  ],
  "outputs": {
    "controlPlaneFQDN": {
      "type": "String",
      "value": "[reference(concat('Microsoft.ContainerService/managedClusters/', parameters('resourceName'))).fqdn]"
    }
  }
}
